<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Журнал внешних заказов.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    </head>
    <body>
       <div th:switch="${outDoorOrderList}" class="container-fluid">

            <div class="row">
                <div class="col-md-6">
                    <h2 th:case="null">Список пуст!</h2>
                    <div th:case="*">
                        <h2 class="my-5">Журнал внешних заказов. <span th:text="${filter.sample} ? 'Образцы.' : 'Серия.'"></span> </h2>
                        <table class="table table-striped table-responsive-md text-nowrap">
                            <thead>
                            		<tr>
						<form th:with="urlBuilder=${T(org.springframework.web.servlet.support.ServletUriComponentsBuilder).fromCurrentRequest()}" action="#" th:action="@{${urlBuilder.toUriString()}}" th:object="${filter}" method="post">
							<td>
								<label for="orderText" class="form-inline">№ заказа</label>
									<input type="text" th:field="*{orderText}"/>
							</td>
							<td>
								<div class="form-group row">
								<label for="dateS" class="form-inline">Начало периода </label>
									<input type="date" th:field="*{dateS}" />

								<label for="dateE" class="form-inline">Окончание периода </label>
									<input type="date" th:field="*{dateE}" />
								</div>
							</td>	

					    		<td>
                                	<label for="client.name" class="form-inline">Клиент</label>
									<select  id="client" name="client" th:field="*{client.id}" >
										<option th:each="client : ${clients}" th:value="${client.id}" th:utext="${client.name}"/>
									</select>
					    		</td>	
					    		<td>
                                	<label for="division.name" class="form-inline">Подр.</label>
									<select  id="division" name="division" th:field="*{division.code}" >
										<option th:each="division : ${divisions}" th:value="${division.code}" th:utext="${division.name}"/>
									</select>
					    		</td>
					    		<td>
								    			<label for="sample" class="col-form-label">Образцы</label>
								    			<input type="checkbox" name="sample" th:field="*{sample}" th:value="${filter.sample}" disabled="disabled" />
											<input type="hidden" name="sample" th:value="${filter.sample}">
							</td>
							<td>
					    			<button type="submit" name="action" value="filter" class="btn btn-primary">Выбрать</button>
							</td>
						</form>
								</tr>
                                <tr>
                                		<th>№ заказа</th>
			                         <th>Дата заказа</th>
									<th>Клиент</th>
									<th>Подразделение</th>
									<th>Номенклатура</th>
									<th>Пользователь</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="p : ${outDoorOrderList}">
				                    <td th:text="${p.id}"></td>
				                    <td th:text="${p.sDate}"></td>
				                    <td th:text="${p.sClient}"></td>
				                    <td th:text="${p.sDivision}"></td>
				                    <td th:text="${p.sDesc}"></td>
				                    <td th:text="${p.sUser}"></td>
				                    <td th:switch="${#httpServletRequest.remoteUser}">
				<a th:case="null" th:href="@{/viewOneOutDoorOrder/{id}(id=${p.id})}" class="btn btn-primary">Смотреть</a>
				<a th:case="*" th:href="@{/login/viewOneOutDoorOrder/{id}(id=${p.id})}" class="btn btn-primary">Смотреть</a>
											</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>                      
                </div>
            </div>
            <input type="button" onclick="printDiv('printableArea')" class="btn btn-primary" value="Распечатать" />
           </div> 

    </body>
</html>